name: Release
on: 
  release:
    types: [published]
jobs:
  publish:
    name: Publish
    runs-on: macos-latest
    env:
      RELEASE: 1
      GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
    permissions:
      contents: write # for asset upload
    steps:
      - name: ⬇️ Checkout
        uses: actions/checkout@v4
      - name: BuildAndPackage
        uses: 4d/build4d-action@maketestable
        with:
          actions: "build,pack,archive"
      - name: Upload
        run: |
          gh release upload ${{github.event.release.tag_name}} build/tool4d-action-test.zip
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
